<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="utf-8" />
    <link rel="icon" href="%PUBLIC_URL%/favicon.ico" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Miro Email Input</title>
  </head>
  <body>
    <noscript>You need to enable JavaScript to run this app.</noscript>
    
    <!-- form header -->
    <form>

      <div class="form-body">
        <div id="emails-input">
          <input type="text" name="email" value="pasha.zastavnitskiy@gmail.com" />
          <input type="text" name="email" value="zapav@ya.ru" />
          <input type="text" name="email" value="" />
        </div>    
      </div>
      <div class="form-additional-actions">
        <button id="add-email">Add Email</button>
        <button id="get-emails-count">Get Emails Count</button></div>
    </form>

    <!-- form footer, buttons -->
    <script>

      window.addEventListener('DOMContentLoaded', function() {
        var inputContainerNode = document.querySelector('#emails-input');
        var emailsInput = new EmailsInput(inputContainerNode, {});

        let counter = 0;
        document.getElementById('add-email').addEventListener('click', (e) => {
          e.preventDefault();

          emailsInput.addValue(`pavel-${++counter}@gmail.com`);
        })

        document.getElementById('get-emails-count').addEventListener('click', (e) => {
          e.preventDefault();

          window.alert(emailsInput.getCount());
        })

        emailsInput.subscribe(list => {
          console.log('Emails in the list', list);
        })
        // Handling Add email and Get emails count buttons, etc.
      });
      
    </script>


  </body>
</html>
